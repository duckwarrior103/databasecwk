<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Kilburn</title>
</head>
<body>
	<h1>Welcome to Kilburnazon</h1>

	<h2>Admin Login</h2>

	<h2 id = 'errormessage'></h2>

    <form method="post" action="processLogin.php" id = "loginForm">
        <label for="loginUsername">Username:</label>
        <input type="text" id="loginUsername" name="loginUsername" required>

        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" name="loginPassword" required>

        <input type="submit" value="Login">
    </form>


</body>
	<script>
		

	const form = document.getElementById('loginForm');
	let errormessage = document.getElementById('errormessage');


	form.onsubmit = function(e) {
	    e.preventDefault();
	    //window.location.assign("dashboard.html");
	    let xhr = new XMLHttpRequest();
	    xhr.open("POST", "processLogin.php", true);
	    xhr.onreadystatechange = function() {
	        if (xhr.readyState === 4 && xhr.status === 200) {
	            if (xhr.response != "L"){
	                errormessage.innerHTML = xhr.responseText;
	            }
	            else {
	                window.location.assign("dashboard.html");
	            }
	        }
	      }

        const formData = new FormData(form);
        xhr.send(formData);
	    
	}
	</script>
</html>